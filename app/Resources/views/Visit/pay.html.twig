{# src/AppBundle/Resources/views/Visit/pay.html.twig#}

{% extends "layout.html.twig" %}

    {% block title %}
        Paiement de la commande - {{ parent() }}
    {% endblock %}


    {% block body %}

        <div class="container">
            <div class="row">

                <div class="col-lg-1">
                </div>

                <div class="col-lg-11 section-progress">
                    <div class="container">

                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item active"><a class="breadcrumb-item" href="{{ path('app_visit_order') }}">Choix des billets</a></li>
                                <li class="breadcrumb-item active"><a class="breadcrumb-item" href="{{ path('app_visit_identify') }}">Identification des visiteurs</a></li>
                                <li class="breadcrumb-item active"><a class="breadcrumb-item" href="{{ path('app_visit_customer') }}">Coordonnées de l'acheteur</a></li>
                                <li class="breadcrumb-item text-success font-weight-bold" style="text-decoration:underline;">PAIEMENT</li>
                                <li class="breadcrumb-item active">Confirmation de la commande</li>
                            </ol>
                        </nav>
                    </div>
                </div>

            </div>
        </div>

        <section>

            <div class="container">
                <div class="row">

                    <div class="col-lg-4">
                    </div>

                    <div class="col-lg-6">

                        <div class="title-recap"><button type="button" class="btn btn-success text-white">Récapitulatif de votre commande :</button></div>
                        <ul>
                            <li><strong>Date de la visite :</strong> {{ visit.visitDate | date('d/m/Y') }}</li>
                            <li><strong>Type de billet :</strong> {{ visit.type }}</li>
                            <li>
                            {% for ticket in visit.tickets %}

                                <strong>Billet n° {{ loop.index }} :</strong> {{ ticket.lastname }} {{ ticket.firstname }} - {{ ticket.price }} euros <br/>

                            {% endfor %}
                            </li>
                            <li><strong>Total de la commande :</strong> {{ visit.totalAmount }} euros</li>
                        </ul>
                        <br/>

                        <div class="title-recap"><button type="button" class="btn btn-success text-white">Coordonnées de l'acheteur :</button></div>
                        <ul>
                            <li><strong>Nom :</strong> {{ visit.customer.lastname }}</li>
                            <li><strong>Prénom :</strong> {{ visit.customer.firstname }}</li>
                            <li><strong>Email :</strong> {{ visit.customer.email }}</li>
                        </ul>
                        <br/>

                        <div class="title-recap"><button type="button" class="btn btn-success text-white">Adresse de facturation :</button></div>
                        <ul>
                            <li><strong>Adresse :</strong> {{ visit.customer.adress }}</li>
                            <li><strong>Code postal :</strong> {{ visit.customer.postCode }}</li>
                            <li><strong>Ville :</strong> {{ visit.customer.city }} - {{ visit.customer.country }}</li>
                        </ul>
                        <br/>


                            <form action="" method="POST">
                                <script
                                        src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                                        data-key="{{ stripe_publish_key }}"
                                        data-amount="{{ visit.totalAmount * 100 }}"
                                        data-email="{{ visit.customer.email }}"
                                        data-name="Musée du Louvre"
                                        data-description="Billeterie"
                                        data-locale="{{ app.request.locale }}"
                                        data-label="Je paie la commande"
                                        data-currency="eur"
                                        data-zip-code="true"
                                        data-allow-remember-me="false">
                                </script>
                            </form>
                    </div>


                    <div class="col-lg-2">
                    </div>

                </div>
            </div>




        </section>

    {% endblock %}
